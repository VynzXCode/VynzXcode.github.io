<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protected Content</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background: #fff;
        }

        /* Container untuk konten asli */
        .content-wrapper {
            position: relative;
            z-index: 1;
            padding: 20px;
        }

        /* Layer hitam permanen */
        .black-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 2147483647;
            pointer-events: none;
        }

        /* Viewport untuk melihat konten */
        .content-viewport {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2147483646;
            background: #fff;
            transition: opacity 0.01s;
        }

        .hide-content {
            opacity: 0 !important;
        }
    </style>
</head>
<body>
    <!-- Konten website -->
    <div class="content-wrapper">
        <h1>Judul Website</h1>
        <p>Ini adalah contoh konten website yang dilindungi dari screenshot.</p>
        <!-- Tambahkan konten website Anda di sini -->
    </div>

    <!-- Viewport untuk melihat konten -->
    <div id="contentViewport" class="content-viewport"></div>
    
    <!-- Layer hitam permanen -->
    <div class="black-layer"></div>

    <script>
        class ScreenshotBlocker {
            constructor() {
                this.viewport = document.getElementById('contentViewport');
                this.content = document.querySelector('.content-wrapper');
                this.isBlocking = false;
                this.blockTimeout = null;
                this.init();
            }

            init() {
                // Clone konten ke viewport
                this.viewport.appendChild(this.content.cloneNode(true));
                
                // Sembunyikan konten asli
                this.content.style.visibility = 'hidden';
                
                // Setup event listeners
                this.setupEventListeners();
                
                // Setup interval untuk pemeriksaan berkala
                this.startPeriodicCheck();
            }

            blockScreen() {
                if (!this.isBlocking) {
                    this.isBlocking = true;
                    this.viewport.classList.add('hide-content');

                    // Clear existing timeout
                    if (this.blockTimeout) {
                        clearTimeout(this.blockTimeout);
                    }

                    // Set block duration
                    this.blockTimeout = setTimeout(() => {
                        this.unblockScreen();
                    }, 1000);
                }
            }

            unblockScreen() {
                this.isBlocking = false;
                this.viewport.classList.remove('hide-content');
            }

            setupEventListeners() {
                // Desktop screenshot detections
                document.addEventListener('keydown', (e) => {
                    if (
                        e.key === 'PrintScreen' ||
                        (e.metaKey && e.shiftKey && (e.key === '3' || e.key === '4')) ||
                        (e.ctrlKey && e.shiftKey && e.key === 'S')
                    ) {
                        this.blockScreen();
                    }
                });

                // Mobile screenshot detections
                let touchStartTime = 0;
                let touchCount = 0;

                document.addEventListener('touchstart', (e) => {
                    touchCount = e.touches.length;
                    touchStartTime = Date.now();
                    if (touchCount >= 2) {
                        this.blockScreen();
                    }
                });

                document.addEventListener('touchend', () => {
                    const touchDuration = Date.now() - touchStartTime;
                    if (touchDuration < 50) {
                        this.blockScreen();
                    }
                });

                // Visibility change detection
                document.addEventListener('visibilitychange', () => {
                    if (document.visibilityState === 'hidden') {
                        this.blockScreen();
                    }
                });

                // Window blur detection
                window.addEventListener('blur', () => {
                    this.blockScreen();
                });
            }

            startPeriodicCheck() {
                setInterval(() => {
                    if (document.hasFocus()) {
                        this.unblockScreen();
                    } else {
                        this.blockScreen();
                    }
                }, 100);

                // Additional check for mobile devices
                setInterval(() => {
                    const now = Date.now();
                    if (now - this.lastInteraction > 300) {
                        this.blockScreen();
                        setTimeout(() => {
                            this.unblockScreen();
                        }, 100);
                    }
                }, 200);
            }
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new ScreenshotBlocker();
        });
    </script>
</body>
</html>
