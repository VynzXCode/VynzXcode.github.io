<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protected Content</title>
    <style>
        /* Base styling */
        body {
            margin: 0;
            padding: 0;
            background: #fff;
        }

        /* Container untuk konten */
        .content-container {
            position: relative;
            padding: 20px;
            background: #fff;
        }

        /* Layer proteksi utama */
        .protection-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 2147483647; /* Maksimum z-index */
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.01s;
        }

        /* Class yang ditambahkan saat screenshot terdeteksi */
        .screenshot-triggered {
            opacity: 1 !important;
        }

        /* Mencegah seleksi teks */
        * {
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* CSS untuk konten Anda */
        .your-content {
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body>
    <!-- Layer proteksi -->
    <div id="protectionLayer" class="protection-layer"></div>

    <!-- Container untuk konten website -->
    <div class="content-container">
        <div class="your-content">
            <h1>Judul Website</h1>
            <p>Ini adalah contoh konten website yang dilindungi dari screenshot.</p>
            <!-- Tambahkan konten website Anda di sini -->
        </div>
    </div>

    <script>
        class AggressiveScreenshotProtection {
            constructor() {
                this.protectionLayer = document.getElementById('protectionLayer');
                this.isProtecting = false;
                this.protectionTimeout = null;
                this.init();
            }

            init() {
                // Mendeteksi berbagai event yang mungkin terkait screenshot
                this.detectScreenshotAttempts();
                
                // Tambahan proteksi untuk mobile
                this.detectMobileScreenshot();
                
                // Proteksi saat tab tidak aktif
                this.detectTabChange();
            }

            protect() {
                if (!this.isProtecting) {
                    this.isProtecting = true;
                    this.protectionLayer.classList.add('screenshot-triggered');

                    // Clear existing timeout
                    if (this.protectionTimeout) {
                        clearTimeout(this.protectionTimeout);
                    }

                    // Set protection duration longer
                    this.protectionTimeout = setTimeout(() => {
                        this.unprotect();
                    }, 500); // Increased duration to ensure screenshot catches black screen
                }
            }

            unprotect() {
                this.isProtecting = false;
                this.protectionLayer.classList.remove('screenshot-triggered');
            }

            detectScreenshotAttempts() {
                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    // Windows: PrintScreen
                    // Mac: Cmd+Shift+3, Cmd+Shift+4
                    // Linux: PrintScreen
                    if (
                        e.key === 'PrintScreen' ||
                        (e.metaKey && e.shiftKey && (e.key === '3' || e.key === '4')) ||
                        (e.ctrlKey && e.shiftKey && e.key === 'S')
                    ) {
                        this.protect();
                    }
                });

                // Window blur events
                window.addEventListener('blur', () => this.protect());
                window.addEventListener('focus', () => this.unprotect());
            }

            detectMobileScreenshot() {
                // iOS gesture (volume + power button)
                document.addEventListener('touchstart', (e) => {
                    if (e.touches.length >= 2) {
                        this.protect();
                    }
                });

                // Android gesture detection
                let lastTouchEnd = 0;
                document.addEventListener('touchend', (e) => {
                    const now = Date.now();
                    if (now - lastTouchEnd <= 300) {
                        this.protect();
                    }
                    lastTouchEnd = now;
                });
            }

            detectTabChange() {
                document.addEventListener('visibilitychange', () => {
                    if (document.visibilityState === 'hidden') {
                        this.protect();
                    } else {
                        this.unprotect();
                    }
                });
            }
        }

        // Initialize protection when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new AggressiveScreenshotProtection();

            // Tambahan: refresh halaman setiap 100ms untuk memastikan layer proteksi selalu aktif
            setInterval(() => {
                const protectionLayer = document.getElementById('protectionLayer');
                if (!protectionLayer.classList.contains('screenshot-triggered')) {
                    protectionLayer.style.display = 'none';
                    setTimeout(() => {
                        protectionLayer.style.display = 'block';
                    }, 1);
                }
            }, 100);
        });
    </script>
</body>
</html>