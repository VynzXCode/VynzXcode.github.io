<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protected Content</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #fff;
            min-height: 100vh;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .content {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        #protectionOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 2147483647;
            display: none;
            pointer-events: none;
        }

        /* Tambahan layer protection */
        .protection-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            z-index: 2147483646;
            pointer-events: none;
        }

        @media print {
            body * {
                visibility: hidden !important;
            }
            #protectionOverlay {
                visibility: visible !important;
                display: block !important;
            }
        }
    </style>
</head>
<body>
    <!-- Layer protection tambahan -->
    <div class="protection-layer"></div>
    
    <div class="content">
        <h1>Contoh Konten Website</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
    </div>

    <div id="protectionOverlay"></div>

    <script>
        class ScreenshotProtection {
            constructor() {
                this.overlay = document.getElementById('protectionOverlay');
                this.isProtecting = false;
                this.volumeDownPressed = false;
                this.powerPressed = false;
                this.lastVolumeTime = 0;
                this.lastPowerTime = 0;
                this.protectionInterval = null;
                this.setupProtection();
            }

            showProtection() {
                this.overlay.style.display = 'block';
                // Tambahkan delay kecil untuk memastikan overlay muncul
                requestAnimationFrame(() => {
                    requestAnimationFrame(() => {
                        this.hideProtection();
                    });
                });
            }

            hideProtection() {
                setTimeout(() => {
                    this.overlay.style.display = 'none';
                }, 300);
            }

            // Fungsi untuk memulai continuous protection
            startContinuousProtection() {
                if (this.protectionInterval) return;
                
                this.protectionInterval = setInterval(() => {
                    this.showProtection();
                }, 100);

                // Hentikan setelah 1 detik
                setTimeout(() => {
                    this.stopContinuousProtection();
                }, 1000);
            }

            stopContinuousProtection() {
                if (this.protectionInterval) {
                    clearInterval(this.protectionInterval);
                    this.protectionInterval = null;
                }
            }

            setupProtection() {
                // Deteksi tombol volume
                window.addEventListener('volumechange', () => {
                    this.volumeDownPressed = true;
                    this.lastVolumeTime = Date.now();
                    
                    if (this.powerPressed || 
                        Date.now() - this.lastPowerTime < 1000) {
                        this.startContinuousProtection();
                    }
                });

                // Deteksi screen lock/power button
                document.addEventListener('visibilitychange', () => {
                    if (document.visibilityState === 'hidden') {
                        this.powerPressed = true;
                        this.lastPowerTime = Date.now();
                        
                        if (this.volumeDownPressed || 
                            Date.now() - this.lastVolumeTime < 1000) {
                            this.startContinuousProtection();
                        }
                    }
                });

                // Reset status tombol
                document.addEventListener('visibilitychange', () => {
                    if (document.visibilityState === 'visible') {
                        setTimeout(() => {
                            this.volumeDownPressed = false;
                            this.powerPressed = false;
                        }, 1000);
                    }
                });

                // Deteksi PrintScreen di Windows
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'PrintScreen' || 
                        e.code === 'PrintScreen' || 
                        (e.key === 'PrintScreen' && e.getModifierState('Meta'))) {
                        this.startContinuousProtection();
                    }
                });

                // Deteksi gesture 3 jari
                let touchCount = 0;
                document.addEventListener('touchstart', (e) => {
                    touchCount = e.touches.length;
                    if (touchCount >= 3) {
                        this.startContinuousProtection();
                    }
                });

                // Tambahan detection untuk iOS
                window.addEventListener('resize', () => {
                    if (this.volumeDownPressed || this.powerPressed) {
                        this.startContinuousProtection();
                    }
                });

                // Prevent standard capture methods
                document.addEventListener('contextmenu', e => e.preventDefault());
                document.addEventListener('selectstart', e => e.preventDefault());
                document.addEventListener('copy', e => e.preventDefault());
                
                // Continuous monitoring untuk mobile
                if (/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                    setInterval(() => {
                        if (this.volumeDownPressed && this.powerPressed) {
                            this.startContinuousProtection();
                        }
                    }, 50);
                }
            }
        }

        // Initialize protection
        document.addEventListener('DOMContentLoaded', () => {
            new ScreenshotProtection();
        });
    </script>
</body>
</html>
